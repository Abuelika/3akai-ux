<!-- CSS -->
<link rel="stylesheet" type="text/css" href="/devwidgets/collectionsalbumview/css/collectionsalbumview.css"/>

<!-- MAIN CONTAINER -->
<div id="collections_main_container" style="display:none;" class="fl-widget-content">
  
  <!-- Header -->
  <div id="collections_header" style="display:none"></div>
  <div id="collections_header_template"><!--
    <h1 class="isEditable">${widgetTitle}</h1>
    <div style="display:none">
      <span style="display:none" id="choose_layout">
        <a id="layout_selector" href="javascript:;"><span id="chosen_layout">{if displayStyle == 'albumView'}__MSG__ALBUM_VIEW__{elseif displayStyle == 'mapView'}__MSG__ARCHITECTURAL_VIEW__{/if}</span>
        </a>
      </span>
      <a href="javascript:;" id="configure_widget">
        <img src="/devwidgets/collectionsalbumview/images/config_icon.png" alt="__MSG__CONFIGURE_THIS_COLLECTIONS_WIDGET__" title="__MSG__CONFIGURE_THIS_COLLECTIONS_WIDGET__"/>
      </a>
    </div>
  --></div>
  

  
  <div id="collections_outer_container">
  <div id="collections_inner_container">
    
    <div id="collections_header_select_layout" style="display:none"></div>
    <div id="collections_header_select_layout_template" style="display:none"><!--
      <ul>
        <li {if displayStyle == "albumView"} class="selected" {/if} id="albumView">__MSG__ALBUM_VIEW__</li>
        <li {if displayStyle == "mapView"} class="selected" {/if} id="mapView">__MSG__ARCHITECTURAL_VIEW__</li>
      </ul>
    --></div>
    
    <!-- Content for memory palace -->
    
    <!-- Album presentation -->
    <div id="collections_albums" style="display:none" class="albumView"></div>
    
    <div id="collections_albums_template" style="display:none" class="albumView"><!--
      {for album in collections}
        <div id="album_{if album.id}${album.id}{else}0{/if}" class="albumCover">
          <div class="albumCoverImage">
            {if album.image}
              <img src="${album.image}" alt="${album.title} __MSG__IMAGE__"/>
            {/if}
          </div>
          <div class="albumCoverTitle"><span class="ellipsis_text">${album.title}</span></div>
          <div class="albumCoverDescription"><span class="ellipsis_text">"${album.description}</span></div>
        </div>
      {/for}
    --></div>
  
    <div id="collections_albums_show_album" style="display:none" class="albumView"></div>
    <div id="collections_albums_show_album_template" style="display:none" class="albumView"><!--
      <div class="albumHero">
        <div class="albumHead">
          <div class="albumTitleContainer">
          <h1>Chapter:</h1>
          <h1 class="isEditable albumTitle">${album.title}</h1></div>
          <div class="configureAlbum configure" style="display:none"><button class="s3d-button s3d-button-primary" style="display:none"><span class="s3d-button-inner">__MSG__DELETE_ALBUM__</span></button><a href="javascript:;"><img src="/devwidgets/collectionsalbumview/images/config_icon.png" alt="__MSG__CONFIGURE_THIS_ALBUM__" title="__MSG__CONFIGURE_THIS_ALBUM__"/></a></div>
        </div>
        <div class="albumImage isEditable">
            <img src="${album.image}"{if !album.image} style="display:none"{/if}/>
            <span class="clickToEditText"></span>
        </div>
        <div class="albumDesc isEditable" id="${album.id}_description">${album.description}</div>
      </div>
      <div class="albumCategories">
        <div class="categoryHeader"><h2>Categories</h2><span style="display:none"><a href="javascript:;"><img src="/devwidgets/collectionsalbumview/images/add_icon.png" alt="__MSG__ADD_NEW_CATEGORY__" title="__MSG__ADD_NEW_CATEGORY__"/></a></span></div>
        {for category in album.categories}
        <div class="categoryPreview" id="category_${category.id}">
          <div class="categoryCover">
            <img src="${category.image}" alt="${category.name} __MSG__IMAGE__"/>
          </div>
          <div class="categoryPreviewName"><span class="ellipsis_text">${category.name}</span></div>
          <span class="categoryPreviewItems">${category.items.length} __MSG__ITEMS__</span>
        </div>
        {/for}
      </div>
    --></div>
  
    <div id="collections_albums_show_category" style="display:none" class="albumView"></div>
    <div id="collections_albums_show_category_template" style="display:none" class="albumView"><!--
      <h1>Chapter: ${album.title}</h1>
      <div class="itemsContainer">
        <div class="itemsContainerHead">
          <h2>Category:</h2>
          <div class="categoryTitleContainer"><h2 class="isEditable categoryTitle categoryData">${category.name}</h2></div>
          <div class="configureCategory configure" style="display:none">
            <button class="s3d-button s3d-button-primary" style="display:none"><span class="s3d-button-inner">__MSG__DELETE_CATEGORY__</span></button>
            <a href="javascript:;"><img src="/devwidgets/collectionsalbumview/images/config_icon.png" alt="__MSG__CONFIGURE_THIS_CATEGORY__" title="__MSG__CONFIGURE_THIS_CATEGORY__"/></a>
          </div>
        </div>
        <div class="scroll-pane">
          <div class="scroll-content">
            {for item in category.items}
              <div class="scroll-content-item" id="item_${item.id}">
                <div class="scrollItemContainer">
                  {if (item.mimeType.split("/")[0] == "image")}
                    <img src="${item.url}" alt="${item.title} image"/>
                  {elseif sakai.config.MimeTypes[item.mimeType]}
                    <img src="${sakai.config.MimeTypes[item.mimeType].URL}" alt="${sakai.config.MimeTypes[item.mimeType].description}" />
                  {else}
                    <img src="${sakai.config.MimeTypes["other"].URL}" alt="${sakai.config.MimeTypes["other"].description}" />
                  {/if}
                  <div class="itemPreviewTitle"><span class="ellipsis_text">${item.title}</span></div>
                </div>
              </div>
            {/for}
          </div>
          <div class="scroll-bar-wrap ui-widget-content ui-corner-bottom">
            <div class="scroll-bar"></div>
          </div>
        </div>
      </div>
    --></div>
    
    <div id="collections_albums_show_item" style="display:none" class="albumView"></div>  
    <div id="collections_albums_show_item_template" style="display:none" class="albumView"><!--
      <div class="itemHero">
        <div class="itemHead">
        <h1>Item:</h1>
        <div class="itemTitleContainer"><h1 class="itemTitle isEditable itemData">${item.title}</h1></div>
        <div class="configureItem configure" style="display:none">
            <button class="s3d-button s3d-button-primary" style="display:none"><span class="s3d-button-inner">Delete Item</span></button>
            <a href="javascript:;"><img src="/devwidgets/collectionsalbumview/images/config_icon.png" alt="Configure this item" title="Configure this item"/></a>
        </div>
        </div>
        <div class="itemImage isEditable itemData">
          <a class="itemLink" href="{if item.url}{if item.mimeType === "x-sakai/link"}http://${item.url.split("http://")[1]}{else}${item.url}{/if}{else}#{/if}" target="_blank">
          {if item && item.mimeType}
              {if (item.mimeType.split("/")[0] === "image")}
                <img src="${item.url}" alt="${item.title} __MSG__IMAGE__"/>
              {elseif sakai.config.MimeTypes[item.mimeType]}
                <img src="${sakai.config.MimeTypes[item.mimeType].URL}" alt="${sakai.config.MimeTypes[item.mimeType].description}" />
              {else}
                <img src="${sakai.config.MimeTypes["other"].URL}" alt="${sakai.config.MimeTypes["other"].description}" />
              {/if}
          {else}
            <img src="" style="display:none;"/>
            <span class="clickToEditText"></span>
          {/if}
          {if item.url}</a>{/if}
        </div>
        <div class="itemDesc isEditable itemData">${item.description}</div>
      </div>
    
    --></div>

    <div id="collections_album" style="display:none" class="albumView"></div>
  
    <div id="collections_album_template" style="display:none" class="albumView"></div>  

    <!-- category table template -->
    <div id="collections_map_categories_listing_body_template" style="display:none" class="mapView"><!-- 
      {for cat in categories}
        <tr><td><input type="checkbox" name="${cat.id}" id="cat_${cat.id}" value="${cat.id}"/><label for="cat_${cat.id}">${cat.name}</label</td><td>${cat.items.length}</td><td><input type="text" class="cat_position" name="${cat.id}" id="cat_position_${cat.id}" value="${cat.position}"/></td></tr>
      {forelse}
        <tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
      {/for}
    --></div>

    </div>
  </div>
</div>

<div id="collections_settings" style="display:none">
  <form action="javascript:;" method="POST">
    <div class="dialog_buttons">
      <form>
        <label for="widget_title">__MSG__TITLE__</label>
        <input type="text" id="widget_title" name="widget_title"/>
        <button class="button-default submit_button s3d-button s3d-button-primary" id="collections_settings_submit"><span class="s3d-button-inner">__MSG__SUBMIT__</span></button>
        <button class="s3d-button" id="collections_settings_cancel"><span class="s3d-button-inner">__MSG__CANCEL__</span></button>
      </form>
    </div>
  </form>
</div>

<div id="widget_contentpicker" class="widget_inline"></div>

<span style="display:none;" id="collections_title_empty">__MSG__PLEASE_INPUT_A_TITLE__</span>
<!-- JAVASCRIPT -->
<script src="/devwidgets/collectionsalbumview/javascript/collectionsalbumview.js" type="text/javascript" charset="utf-8"></script>

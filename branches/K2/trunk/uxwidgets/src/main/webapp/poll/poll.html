<script type="text/javascript" language="JavaScript" src="lib/sdata.js">
</script>
<script type="text/javascript" language="JavaScript" src="lib/jquery.js">
</script>
<div id="poll_settings" style="display:none">
	<div id="poll_initial_settings" style="display:none">
        <b>I would like to:</b>
        <br/>
        <table><tbody><tr style="height: 40px;"><td style="width: 20px;">
        <img width="16" src="/devwidgets/poll/images/new.png"/>
        </td><td>
        <a style="cursor: pointer;cursor:hand" class="poll_select_create_new">Create a new poll</a>
        </td></tr>
        <tr><td>
        <img src="/devwidgets/poll/images/select.png"/>
        </td>
        <td>
        <a style="cursor: pointer;cursor:hand" class="poll_select_existing">Select Existing Poll</a>
        </td></tr>
        </tbody></table>
    </div>
    <div id="poll_not_exists" style="display:none">
        The poll doesn't exist 
    </div>
    <div id="poll_details" style="display:none">
    	 <a style="cursor: pointer;cursor:hand; text-decoration: underline" class="poll_select_create_new">Create new poll</a> / <a style="cursor: pointer;cursor:hand; text-decoration: underline" class="poll_select_existing">Select existing poll</a>
		<br/><br/>
        <b>Selected Poll:</b>
        <br/>
        <br/>
		<form id="poll_current_form">
        <table>
            <tr>
                <td style="width:100px; vertical-align:top">
                    Question:
                </td>
                <td>
                    <textarea cols="100" rows="3" id="poll_current_question" name="pollText"></textarea>
                </td>
				</tr>
				<tr>
				<td style="width:100px; vertical-align:top">
                    Description:
                </td>
                <td>
                    <textarea cols="100" rows="3" id="poll_current_description" name="description"></textarea>
                </td>
				</tr><tr>
                <td>
                    Opening:
                </td>
                <td>
                	<input type="text" class="date-pick" id="poll_current_opendate" name="poll_current_opendate"/>
                    <select id="poll_current_openhour" name="poll_current_openhour">
                        <option>00</option>
                        <option>01</option>
                        <option>02</option>
                        <option>03</option>
                        <option>04</option>
                        <option>05</option>
                        <option>06</option>
                        <option>07</option>
                        <option>08</option>
                        <option>09</option>
                        <option>10</option>
                        <option>11</option>
                        <option>12</option>
                        <option>13</option>
                        <option>14</option>
                        <option>15</option>
                        <option>16</option>
                        <option>17</option>
                        <option>18</option>
                        <option>19</option>
                        <option>20</option>
                        <option>21</option>
                        <option>22</option>
                        <option>23</option>
                    </select>
                    :
                    <select id="poll_current_openminute" name="poll_current_openminute">
                        <option>00</option>
                        <option>05</option>
                        <option>10</option>
                        <option>15</option>
                        <option>20</option>
                        <option>25</option>
                        <option>30</option>
                        <option>35</option>
                        <option>40</option>
                        <option>45</option>
                        <option>50</option>
                        <option>55</option>
                    </select>
                </td>
				</tr><tr>
                <td>
                    Closing:
					</td><td>
					<input type="text" class="date-pick" id="poll_current_closedate" name="poll_current_closedate"/>
                    <select id="poll_current_closehour" name="poll_current_closehour">
                        <option>00</option>
                        <option>01</option>
                        <option>02</option>
                        <option>03</option>
                        <option>04</option>
                        <option>05</option>
                        <option>06</option>
                        <option>07</option>
                        <option>08</option>
                        <option>09</option>
                        <option>10</option>
                        <option>11</option>
                        <option>12</option>
                        <option>13</option>
                        <option>14</option>
                        <option>15</option>
                        <option>16</option>
                        <option>17</option>
                        <option>18</option>
                        <option>19</option>
                        <option>20</option>
                        <option>21</option>
                        <option>22</option>
                        <option>23</option>
                    </select>
                    :
                    <select id="poll_current_closeminute" name="poll_current_closeminute">
                        <option>00</option>
                        <option>05</option>
                        <option>10</option>
                        <option>15</option>
                        <option>20</option>
                        <option>25</option>
                        <option>30</option>
                        <option>35</option>
                        <option>40</option>
                        <option>45</option>
                        <option>50</option>
                        <option>55</option>
                    </select>
                </td>
            </tr>
        </table>
		<br/>
        <b>Options:</b> (<a style="cursor:pointer; cursor:hand; text-decoration: underline"  id="poll_current_add_option">Add Option</a>)
		<br/><br/>
		<div id="poll_selected_options_list"></div>
		<div id="poll_selected_options_list_template"><!--
			{var index = 0}
			<table>
			{for p in processedOptions}
				{if p.isActive}
				${index++|eat}
				<tr>
					<td style="width:100px">
						Option ${index}:
					</td>
					<td>
						{if p.existing}
							<textarea cols="100" rows="1" id="poll_current_existing_option_${p.id}" name="poll_current_existing_option_${p.id}">${p.option}</textarea>
						{else}
							<textarea cols="100" rows="1" id="poll_current_new_option_${p.id}" name="poll_current_new_option_${p.id}">${p.option}</textarea>
						{/if}
					</td>
					<td style="text-align:center; width:25px">
						{if p.existing}
							<a style="cursor:hand;cursor:pointer" class="poll_current_delete_option" id="poll_current_delete_option_existing_${p.id}"><img src="/devwidgets/poll/images/delete.png"/></a>
						{else}
							<a style="cursor:hand;cursor:pointer" class="poll_current_delete_option" id="poll_current_delete_option_new_${p.id}"><img src="/devwidgets/poll/images/delete.png"/></a>
						{/if}
					<td>
				</tr>
				{/if}
			{/for}
			</table>
		--></div>
        <br/>
        <br/>
		</form>
        <input type="button" value="Save Changes" id="poll_save_changes_button""/>
    </div>
	
	<div id="poll_create_new" style="display:none">
        <b>Create a new poll:</b>
        <br/>
        <br/>
		<form id="poll_new_form">
        <table>
            <tr>
                <td style="width:100px; vertical-align:top">
                    Question:
                </td>
                <td>
                    <input type="text" id="poll_new_question" name="pollText" style="width:646px"></textarea>
                </td>
				</tr>
				<tr>
				<td style="width:100px; vertical-align:top">
                    Description:
                </td>
                <td>
                    <textarea style="width:650px" rows="3" id="poll_new_description" name="description"></textarea>
                </td>
				</tr><tr>
                <td>
                    Opening:
                </td>
                <td>
                	<input type="text" class="date-pick" id="poll_new_opendate" name="poll_new_opendate"/>
                    <select id="poll_new_openhour" name="poll_new_openhour">
                        <option>00</option>
                        <option>01</option>
                        <option>02</option>
                        <option>03</option>
                        <option>04</option>
                        <option>05</option>
                        <option>06</option>
                        <option>07</option>
                        <option>08</option>
                        <option>09</option>
                        <option>10</option>
                        <option>11</option>
                        <option>12</option>
                        <option>13</option>
                        <option>14</option>
                        <option>15</option>
                        <option>16</option>
                        <option>17</option>
                        <option>18</option>
                        <option>19</option>
                        <option>20</option>
                        <option>21</option>
                        <option>22</option>
                        <option>23</option>
                    </select>
                    :
                    <select id="poll_new_openminute" name="poll_new_openminute">
                        <option>00</option>
                        <option>05</option>
                        <option>10</option>
                        <option>15</option>
                        <option>20</option>
                        <option>25</option>
                        <option>30</option>
                        <option>35</option>
                        <option>40</option>
                        <option>45</option>
                        <option>50</option>
                        <option>55</option>
                    </select>
                </td>
				</tr><tr>
                <td>
                    Closing:
					</td><td>
					<input type="text" class="date-pick" id="poll_new_closedate" name="poll_new_closedate"/>
                    <select id="poll_new_closehour" name="poll_new_closehour">
                        <option>00</option>
                        <option>01</option>
                        <option>02</option>
                        <option>03</option>
                        <option>04</option>
                        <option>05</option>
                        <option>06</option>
                        <option>07</option>
                        <option>08</option>
                        <option>09</option>
                        <option>10</option>
                        <option>11</option>
                        <option>12</option>
                        <option>13</option>
                        <option>14</option>
                        <option>15</option>
                        <option>16</option>
                        <option>17</option>
                        <option>18</option>
                        <option>19</option>
                        <option>20</option>
                        <option>21</option>
                        <option>22</option>
                        <option>23</option>
                    </select>
                    :
                    <select id="poll_new_closeminute" name="poll_new_closeminute">
                        <option>00</option>
                        <option>05</option>
                        <option>10</option>
                        <option>15</option>
                        <option>20</option>
                        <option>25</option>
                        <option>30</option>
                        <option>35</option>
                        <option>40</option>
                        <option>45</option>
                        <option>50</option>
                        <option>55</option>
                    </select>
                </td>
            </tr>
        </table>
		<br/>
        <b>Options:</b> (<a style="cursor:pointer; cursor:hand; text-decoration: underline" id="poll_new_add_option">Add Option</a>)
		<br/><br/>
		<div id="poll_new_options_list"></div>
		<div id="poll_new_options_list_template"><!--
			{var index = 0}
			<table>
			{for p in processedOptions}
				{if p.isActive}
				${index++|eat}
					<tr>
						<td style="width:100px">
							Option ${index}:
						</td>
						<td>
							<textarea style="width:650px" rows="1" id="poll_new_option_${p.id}" name="poll_new_option_${p.id}">${p.option}</textarea>
						</td>
						<td style="text-align:center; width:25px">
							<a style="cursor:hand;cursor:pointer" class="poll_new_delete_option" id="poll_new_delete_option_${p.id}"><img src="/devwidgets/poll/images/delete.png"/></a>
						<td>
					</tr>
				{/if}
			{/for}
			{if index == 0}
				<tr><td>
				No options available
				</td></tr>
			{/if}
			</table>
		--></div>
		</form>
        <br/>
        <input type="button" value="Create" id="poll_create_new_button"/>
    </div>
	
    <div id="poll_existing_screen" style="display:none">
        Available polls:
        <br/>
        <br/>
        <div id="poll_existing_list">
        </div>
        <div id="poll_existing_list_template" style="display:none"><!--
            {for i in poll_collection}
            <a style="cursor:hand; cursor:pointer" class="poll_existing_poll" id="poll_existing_poll_${i.id}">${i.pollText}</a>
            <br/>
            {forelse}
            No polls available
            <br/>
            {/for}
     	--></div>
        <br/>
        <input type="button" value="Cancel" id="poll_existing_cancel"/>
    </div>
</div>
<div id="poll_output" style="display:none; border: 1px solid #CCCCCC; width:400px; padding: 5px">
	<div id="poll_output_no_available" style="display:none">
		This poll is no longer available
	</div>
	<div id="poll_results" style="display:none"></div>
	<div id="poll_results_template" style="display:none"><!--
		<b>${pollText}</b>
		<br/><br/>
		{if description}
		<span style="color:#AAAAAA">${description}</span>
		<br/><br/>
		{/if}
		<table cellpadding="2px" border="1" style="width:100%"><tr><td style="background-color:#CCCCCC; font-weight:bold">
		Options
		</td>
		<td style="background-color:#CCCCCC; font-weight:bold">
		Votes
		</td>
		<td style="background-color:#CCCCCC; font-weight:bold">
		%
		</td></tr>
		{for p in processedOptions}
		<tr>
		<td>
		${p.option}
		</td>
		<td>
		${p.noVotes}
		</td>
		<td>
		${p.percentages}
		</td></tr>
		{/for}
		</table>
		<br/><br/>
		<div style="text-align:center"><img src="${chart}"/></div>
	--></div>
	<div id="poll_take" style="display:none"></div>
	<div id="poll_take_template" style="display:none"><!--
		<b>${pollText}</b>
		<br/><br/>
		{if description}
		<span style="color:#AAAAAA">${description}</span>
		<br/><br/>
		{/if}
		<form id="poll_answer_form">
		<table>
		{var index = 0}
		{for p in processedOptions}
		<tr><td>
		<input type="radio" name="answering_${tuid}" value="${p.id}" id="answer_option_${p.id}" {if index == 0} CHECKED{/if}/></td><td>
		${p.option}
		</td></tr>
		${index++|eat}
		{/for}
		</table>
		</form>
		<br/>
		<input type="button" value="Vote!" id="poll_vote_button"/>
	--></div>
</div>
<script type="text/javascript" language="JavaScript" src="/devwidgets/poll/javascript/poll.js">
</script>
